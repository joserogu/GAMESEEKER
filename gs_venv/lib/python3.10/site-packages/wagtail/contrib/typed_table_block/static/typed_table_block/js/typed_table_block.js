(()=>{"use strict";var t,e={8793:function(t,e,n){var o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,l=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=l.next()).done;)a.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=l.return)&&n.call(l)}finally{if(i)throw i.error}}return a};e.__esModule=!0,e.TypedTableBlockValidationError=e.TypedTableBlockDefinition=e.TypedTableBlock=void 0;var l=n(5447),a=function(){function t(t,e,n,o,i){var a=this;this.blockDef=t,this.type=t.name,this.columns=[],this.rows=[],this.columnCountIncludingDeleted=0,this.rowCountIncludingDeleted=0,this.prefix=n,this.childBlockDefsByName={},this.blockDef.childBlockDefs.forEach((function(t){a.childBlockDefsByName[t.name]=t}));var r=this.blockDef.meta.strings,s=$('\n      <div class="typed-table-block '.concat((0,l.escapeHtml)(this.blockDef.meta.classname||""),'">\n        <input type="hidden" name="').concat((0,l.escapeHtml)(n),'-column-count" data-column-count value="0">\n        <input type="hidden" name="').concat((0,l.escapeHtml)(n),'-row-count" data-row-count value="0">\n        <div data-deleted-fields></div>\n        <div class="typed-table-block__wrapper">\n          <table>\n            <thead>\n              <tr>\n                <th></th>\n                <th class="control-cell">\n                  <button type="button" class="button button-small button-secondary append-column" data-append-column>\n                    ').concat((0,l.escapeHtml)(r.ADD_COLUMN),'\n                  </button>\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n            </tbody>\n            <tfoot>\n              <tr>\n                <td class="control-cell">\n                  <button\n                    type="button"\n                    class="button button-small button-secondary button--icon text-replace prepend-row"\n                    data-add-row\n                    aria-label="').concat((0,l.escapeHtml)(r.ADD_ROW),'"\n                    title="').concat((0,l.escapeHtml)(r.ADD_ROW),'"\n                  >\n                    <svg class="icon icon-plus icon" aria-hidden="true">\n                      <use href="#icon-plus"></use>\n                    </svg>\n                  </button></td>\n              </tr>\n            </tfoot>\n          </table>\n        </div>\n      </div>\n    '));$(e).replaceWith(s),this.thead=s.find("table > thead").get(0),this.tbody=s.find("table > tbody").get(0),this.columnCountInput=s.find("input[data-column-count]").get(0),this.rowCountInput=s.find("input[data-row-count]").get(0),this.deletedFieldsContainer=s.find("[data-deleted-fields]").get(0),this.appendColumnButton=s.find("button[data-append-column]"),this.addRowButton=s.find("button[data-add-row]"),this.addRowButton.hide(),this.blockDef.meta.helpText&&s.append('\n        <div class="c-sf-help">\n          <div class="help">\n            '.concat(this.blockDef.meta.helpText,"\n          </div>\n        </div>\n      ")),this.addColumnCallback=null,this.addColumnMenu=$('<ul class="add-column-menu"></ul>'),this.blockDef.childBlockDefs.forEach((function(t){var e=$('<button type="button" class="button button-small"></button>').text(t.meta.label);e.on("click",(function(){a.addColumnCallback&&a.addColumnCallback(t),a.hideAddColumnMenu()}));var n=$("<li></li>").append(e);a.addColumnMenu.append(n)})),this.addColumnMenuBaseElement=null,this.appendColumnButton.on("click",(function(){a.toggleAddColumnMenu(a.appendColumnButton,(function(t){a.insertColumn(a.columns.length,t,{addInitialRow:!0})}))})),this.addRowButton.on("click",(function(){a.insertRow(a.rows.length)})),this.setState(o),i&&this.setError(i)}return t.prototype.showAddColumnMenu=function(t,e){this.addColumnMenuBaseElement=t,t.after(this.addColumnMenu),this.addColumnMenu.show(),this.addColumnCallback=e},t.prototype.hideAddColumnMenu=function(){this.addColumnMenu.hide(),this.addColumnMenuBaseElement=null},t.prototype.toggleAddColumnMenu=function(t,e){this.addColumnMenuBaseElement===t?this.hideAddColumnMenu():this.showAddColumnMenu(t,e)},t.prototype.clear=function(){this.columns=[],this.rows=[],this.columnCountIncludingDeleted=0,this.columnCountInput.value=0,this.rowCountIncludingDeleted=0,this.rowCountInput.value=0,this.deletedFieldsContainer.replaceChildren();var t=this.thead.children[0];t.replaceChildren(t.firstElementChild,t.lastElementChild),this.appendColumnButton.text(this.blockDef.meta.strings.ADD_COLUMN).removeClass("button--icon text-replace white").removeAttr("aria-label").removeAttr("title"),this.tbody.replaceChildren(),this.addRowButton.hide()},t.prototype.insertColumn=function(t,e,n){var o=this,i={blockDef:e,position:t,id:this.columnCountIncludingDeleted};this.columnCountIncludingDeleted++;for(var a=t;a<this.columns.length;a++)this.columns[a].position++,this.columns[a].positionInput.value=this.columns[a].position;this.columns.splice(t,0,i),this.columnCountInput.value=this.columnCountIncludingDeleted;var r=this.thead.children[0],s=r.children,u=document.createElement("th");r.insertBefore(u,s[t+1]),i.typeInput=document.createElement("input"),i.typeInput.type="hidden",i.typeInput.name=this.prefix+"-column-"+i.id+"-type",i.typeInput.value=e.name,u.appendChild(i.typeInput),i.positionInput=document.createElement("input"),i.positionInput.type="hidden",i.positionInput.name=this.prefix+"-column-"+i.id+"-order",i.positionInput.value=t,u.appendChild(i.positionInput),i.deletedInput=document.createElement("input"),i.deletedInput.type="hidden",i.deletedInput.name=this.prefix+"-column-"+i.id+"-deleted",i.deletedInput.value="",this.deletedFieldsContainer.appendChild(i.deletedInput);var c=$('<button type="button"\n      class="button button-secondary button-small button--icon text-replace prepend-column"\n      aria-label="'.concat((0,l.escapeHtml)(this.blockDef.meta.strings.INSERT_COLUMN),'"\n      title="').concat((0,l.escapeHtml)(this.blockDef.meta.strings.INSERT_COLUMN),'">\n        <svg class="icon icon-plus icon" aria-hidden="true"><use href="#icon-plus"></use></svg>\n      </button>'));$(u).append(c),c.on("click",(function(){o.toggleAddColumnMenu(c,(function(t){o.insertColumn(i.position,t,{addInitialRow:!0})}))})),i.headingInput=document.createElement("input"),i.headingInput.type="text",i.headingInput.name=this.prefix+"-column-"+i.id+"-heading",i.headingInput.className="column-heading",i.headingInput.placeholder=this.blockDef.meta.strings.COLUMN_HEADING,u.appendChild(i.headingInput);var d=$('<button type="button"\n      class="button button-secondary button-small button--icon text-replace no delete-column"\n      aria-label="'.concat((0,l.escapeHtml)(this.blockDef.meta.strings.DELETE_COLUMN),'"\n      title="').concat((0,l.escapeHtml)(this.blockDef.meta.strings.DELETE_COLUMN),'">\n        <svg class="icon icon-bin icon" aria-hidden="true"><use href="#icon-bin"></use></svg>\n      </button>'));$(u).append(d),d.on("click",(function(){o.deleteColumn(i.position)}));var h=this.blockDef.childBlockDefaultStates[e.name];return Array.from(this.tbody.children).forEach((function(e,n){var l=o.rows[n],a=e.children,r=document.createElement("td");e.insertBefore(r,a[t+1]);var s=o.initCell(r,i,l,h);l.blocks.splice(t,0,s)})),this.addRowButton.show(),this.appendColumnButton.html('<svg class="icon icon-plus icon" aria-hidden="true"><use href="#icon-plus"></use></svg>').addClass("button--icon text-replace white").attr("aria-label",this.blockDef.meta.strings.ADD_COLUMN).addClass("button--icon text-replace white").attr("aria-label",this.blockDef.meta.strings.ADD_COLUMN).attr("title",this.blockDef.meta.strings.ADD_COLUMN),n&&n.addInitialRow&&0===this.tbody.children.length&&this.insertRow(0),i},t.prototype.deleteColumn=function(t){var e=this;this.columns[t].deletedInput.value="1";var n=this.thead.children[0],o=n.children;n.removeChild(o[t+1]),Array.from(this.tbody.children).forEach((function(n,o){var i=n.children;n.removeChild(i[t+1]),e.rows[o].blocks.splice(t,1)})),this.columns.splice(t,1);for(var i=t;i<this.columns.length;i++)this.columns[i].position--,this.columns[i].positionInput.value=this.columns[i].position;0===this.columns.length&&this.clear()},t.prototype.insertRow=function(t,e){var n=this,o=document.createElement("tr"),i={blocks:[],position:t,id:this.rowCountIncludingDeleted};if(t<this.rows.length){var a=this.tbody.children[t];this.tbody.insertBefore(o,a)}else this.tbody.appendChild(o);this.rows.splice(t,0,i),this.rowCountIncludingDeleted++,this.rowCountInput.value=this.rowCountIncludingDeleted;var r=document.createElement("td");r.className="control-cell",o.appendChild(r);var s=$('<button type="button"\n      class="button button-secondary button-small button--icon text-replace prepend-row"\n      aria-label="'.concat((0,l.escapeHtml)(this.blockDef.meta.strings.INSERT_ROW),'"\n      title="').concat((0,l.escapeHtml)(this.blockDef.meta.strings.INSERT_ROW),'">\n        <svg class="icon icon-plus icon" aria-hidden="true"><use href="#icon-plus"></use></svg>\n      </button>'));$(r).append(s),s.on("click",(function(){n.insertRow(i.position)})),this.columns.forEach((function(t,l){var a;a=e?e[l]:n.blockDef.childBlockDefaultStates[t.blockDef.name];var r=document.createElement("td");o.appendChild(r),i.blocks[l]=n.initCell(r,t,i,a)}));var u=document.createElement("td");u.className="control-cell",o.appendChild(u),i.positionInput=document.createElement("input"),i.positionInput.type="hidden",i.positionInput.name=this.prefix+"-row-"+i.id+"-order",i.positionInput.value=i.position,u.appendChild(i.positionInput);var c=$('<button type="button"\n      class="button button-secondary button-small button--icon text-replace no delete-row"\n      aria-label="'.concat((0,l.escapeHtml)(this.blockDef.meta.strings.DELETE_ROW),'"\n      title="').concat((0,l.escapeHtml)(this.blockDef.meta.strings.DELETE_ROW),'">\n        <svg class="icon icon-bin icon" aria-hidden="true"><use href="#icon-bin"></use></svg>\n      </button>'));$(u).append(c),c.on("click",(function(){n.deleteRow(i.position)})),i.deletedInput=document.createElement("input"),i.deletedInput.type="hidden",i.deletedInput.name=this.prefix+"-row-"+i.id+"-deleted",i.deletedInput.value="",this.deletedFieldsContainer.appendChild(i.deletedInput);for(var d=t+1;d<this.rows.length;d++)this.rows[d].position++,this.rows[d].positionInput.value=this.rows[d].position;return i},t.prototype.deleteRow=function(t){this.rows[t].deletedInput.value="1";var e=this.tbody.children[t];this.tbody.removeChild(e),this.rows.splice(t,1);for(var n=t;n<this.rows.length;n++)this.rows[n].position--,this.rows[n].positionInput.value=this.rows[n].position},t.prototype.initCell=function(t,e,n,o){var i=document.createElement("div");t.appendChild(i);var l=this.prefix+"-cell-"+n.id+"-"+e.id;return e.blockDef.render(i,l,o,null)},t.prototype.setState=function(t){var e=this;this.clear(),t&&(t.columns.forEach((function(t,n){var o=e.childBlockDefsByName[t.type];e.insertColumn(n,o).headingInput.value=t.heading})),t.rows.forEach((function(t,n){e.insertRow(n,t.values)})))},t.prototype.setError=function(t){var e,n,l,a;if(1===t.length){var r=t[0];if(r.cellErrors)try{for(var s=o(Object.entries(r.cellErrors)),u=s.next();!u.done;u=s.next()){var c=i(u.value,2),d=c[0],h=c[1];try{for(var p=(l=void 0,o(Object.entries(h))),m=p.next();!m.done;m=p.next()){var f=i(m.value,2),b=f[0],v=f[1];this.rows[d].blocks[b].setError([v])}}catch(t){l={error:t}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(l)throw l.error}}}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}}},t.prototype.getState=function(){return{columns:this.getColumnStates(),rows:this.rows.map((function(t){return{values:t.blocks.map((function(t){return t.getState()}))}}))}},t.prototype.getDuplicatedState=function(){return{columns:this.getColumnStates(),rows:this.rows.map((function(t){return{values:t.blocks.map((function(t){return void 0===t.getDuplicatedState?t.getState():t.getDuplicatedState()}))}}))}},t.prototype.getValue=function(){return{columns:this.getColumnStates(),rows:this.rows.map((function(t){return{values:t.blocks.map((function(t){return t.getValue()}))}}))}},t.prototype.getColumnStates=function(){return this.columns.map((function(t){return{type:t.blockDef.name,heading:t.headingInput.value}}))},t.prototype.getTextLabel=function(t){var e,n,i,l,a=t&&t.maxLength,r="";try{for(var s=o(this.rows),u=s.next();!u.done;u=s.next()){var c=u.value;try{for(var d=(i=void 0,o(c.blocks)),h=d.next();!h.done;h=d.next()){var p=h.value;if(p.getTextLabel){var m=p.getTextLabel({maxLength:a});if(m)if(r){var f=r+", "+m;if(a&&f.length>a-1)return r.endsWith("…")||(r+="…"),r;r=f}else r=m}}}catch(t){i={error:t}}finally{try{h&&!h.done&&(l=d.return)&&l.call(d)}finally{if(i)throw i.error}}}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return r},t.prototype.focus=function(t){this.columns.length?this.rows.length?this.rows[0].blocks[0].focus(t):this.addRowButton.focus():this.appendColumnButton.focus()},t}();e.TypedTableBlock=a;var r=function(){function t(t,e,n,o){this.name=t,this.childBlockDefs=e,this.childBlockDefaultStates=n,this.meta=o}return t.prototype.render=function(t,e,n,o){return new a(this,t,e,n,o)},t}();e.TypedTableBlockDefinition=r,window.telepath.register("wagtail.contrib.typed_table_block.blocks.TypedTableBlock",r);var s=function(t){this.cellErrors=t};e.TypedTableBlockValidationError=s,window.telepath.register("wagtail.contrib.typed_table_block.TypedTableBlockValidationError",s)}},n={};function o(t){var i=n[t];if(void 0!==i)return i.exports;var l=n[t]={exports:{}};return e[t].call(l.exports,l,l.exports,o),l.exports}o.m=e,t=[],o.O=(e,n,i,l)=>{if(!n){var a=1/0;for(c=0;c<t.length;c++){for(var[n,i,l]=t[c],r=!0,s=0;s<n.length;s++)(!1&l||a>=l)&&Object.keys(o.O).every((t=>o.O[t](n[s])))?n.splice(s--,1):(r=!1,l<a&&(a=l));if(r){t.splice(c--,1);var u=i();void 0!==u&&(e=u)}}return e}l=l||0;for(var c=t.length;c>0&&t[c-1][2]>l;c--)t[c]=t[c-1];t[c]=[n,i,l]},o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.j=10,(()=>{var t={10:0};o.O.j=e=>0===t[e];var e=(e,n)=>{var i,l,[a,r,s]=n,u=0;if(a.some((e=>0!==t[e]))){for(i in r)o.o(r,i)&&(o.m[i]=r[i]);if(s)var c=s(o)}for(e&&e(n);u<a.length;u++)l=a[u],o.o(t,l)&&t[l]&&t[l][0](),t[l]=0;return o.O(c)},n=globalThis.webpackChunkwagtail=globalThis.webpackChunkwagtail||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var i=o.O(void 0,[751],(()=>o(8793)));i=o.O(i)})();